## 背景模式面試題目 - Knob 元件製作

### 元件功能需求
- 拉動元件必須可以變更數值
- 思考並設計元件 Emmit Events
- 中間顯示目前數值，外圍有環形拉條。
- 可自訂最大、最小值
- 可自訂顏色與尺寸
- 可設定起點位置
  
---

### 我的思考過程

#### 1. 首先問 chatgpt 並快速產出第 1 版本的 knob components
https://chatgpt.com/share/6789e4ca-918c-8012-a9fc-e6bdfe828b50

複製貼上後產生一個很像，但完全不對的 Knob 元件，可是我們有第 1 個版本了。
![image](https://github.com/jasonlin1993/KnobComponents/blob/main/knob.gif)

#### 1-1 哪裡需要修正?
 1. 拖曳 vs 滑鼠移動：滑鼠只要進入範圍就開始計算，而不是在「按住並拖曳」時才更新數值。
 2. 外圍環形拉條比例顯示錯誤：如果想讓旋轉對應到 0~100 的百分比，需要對角度和進度值做更多細部校正

#### 1-2 程式碼如何修正?
我從第一版中發現的最大問題有兩個：
1. 拖曳與滑鼠移動的差異
   - 你的第一版是用 @mousemove 直接監聽滑鼠在整個圓形範圍的移動狀況，導致只要滑進圓形區域就會改變進度。如果想要做成類似旋鈕（knob）或拖曳的行為，就必須只在「按住」並「移動」的時候更新數值。
2. 角度與進度的計算關係
   - 使用 `Math.atan2` 計算滑鼠(或觸碰)相對於圓心的角度，並將該角度轉換成 0~360 區間。
   - 透過「目前角度 - 上一次的角度」的差值，來更新 `progress`。
   - 如要支援可循環旋轉，就需要檢查是否有超過 180 度或小於 -180 度的情況，並手動校正角度。
3. `stroke-dashoffset` 表示外圍環形進度
   - 由 `circumference - (progress / 100) * circumference` 算出。
   - `progress` 從 0~100 時，環形進度能正確顯示在畫面上
##### 1-2-1 改進主要程式碼區塊
1. 計算滑鼠位置與容器中心的角度


